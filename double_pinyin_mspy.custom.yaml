# Rime schema
# encoding: utf-8
patch:
  switches:
    # - name: ascii_mode
    #   reset: 0
    #   states: [ ä¸­æ–‡, Eng ]
    - name: emoji_suggestion
      reset: 1
      states: [ "Hah", "ğŸ˜„" ]
    - name: full_shape
      states: [ åŠ, å…¨ ]
    - name: simplification
      reset: 1
      states: [ç¹, ç®€]
    - name: ascii_punct
      reset: 1
      states: ["ã€‚ï¼Œ",". ," ]
  schema/name: "å¾®è½¯åŒæ‹¼++"
  schema/dependencies:
    - reverse_lookup_helper
  engine/filters:
    - reverse_lookup_filter@double_assistant_reverse_lookup
    - simplifier
    - simplifier@emoji_suggestion
    - uniquifier
  engine/segmentors:
    - ascii_segmentor
    - matcher
    - affix_segmentor@double_assistant_reverse_lookup_helper
    - abc_segmentor
    - punct_segmentor
    - fallback_segmentor
  engine/translators:
    - punct_translator
    - script_translator
    - table_translator@double_assistant_reverse_lookup_helper
    - table_translator@custom_phrase
    - lua_translator@date_time_translator


  speller/algebra:
    - erase/^xx$/
    - derive/^([a-z;]+):\w+/$1/
    - xform/^([aoe].*)$/o$1/
    - xform/^([ae])(.*)$/$1$1$2/
    - xform/iu$/Q/
    - xform/[iu]a$/W/
    - xform/er$|[uv]an$/R/
    - xform/[uv]e$/T/
    - xform/v$|uai$/Y/
    - xform/^sh/U/
    - xform/^ch/I/
    - xform/^zh/V/
    - xform/uo$/O/
    - xform/[uv]n$/P/
    - xform/i?ong$/S/
    - xform/[iu]ang$/D/
    - xform/(.)en$/$1F/
    - xform/(.)eng$/$1G/
    - xform/(.)ang$/$1H/
    - xform/ian$/M/
    - xform/(.)an$/$1J/
    - xform/iao$/C/
    - xform/(.)ao$/$1K/
    - xform/(.)ai$/$1L/
    - xform/(.)ei$/$1Z/
    - xform/ie$/X/
    - xform/ui$/V/
    - derive/T$/V/
    - xform/(.)ou$/$1B/
    - xform/in$/N/
    - xform/ing$/;/

    - xform/^([aoe].*):/o$1:/
    - xform/iu:/Q/
    - xform/[iu]a:/W/
    - xform/er:|[uv]an:/R/
    - xform/[uv]e:/T/
    - xform/v:|uai:/Y/
    - xform/^sh/U/
    - xform/^ch/I/
    - xform/^zh/V/
    - xform/uo:/O/
    - xform/[uv]n:/P/
    - xform/i?ong:/S/
    - xform/[iu]ang:/D/
    - xform/(.)en:/$1F/
    - xform/(.)eng:/$1G/
    - xform/(.)ang:/$1H/
    - xform/ian:/M/
    - xform/(.)an:/$1J/
    - xform/iao:/C/
    - xform/(.)ao:/$1K/
    - xform/(.)ai:/$1L/
    - xform/(.)ei:/$1Z/
    - xform/ie:/X/
    - xform/ui:/V/
    - derive/T:/V/
    - xform/(.)ou:/$1B/
    - xform/in:/N/
    - xform/ing:/;/
    - xform/(.)([aoeuiv]):/$1$2/

    - xlit/QWRTYUIOPSDFGHMJCKLZXVBN/qwrtyuiopsdfghmjcklzxvbn/

  double_assistant_reverse_lookup: #è©²åæŸ¥æ¿¾é¡å
    tags: [ double_assistant_reverse_lookup_helper ] #æ›åœ¨é€™å€‹tagæ‰€å°æ‡‰çš„ç¿»è­¯å™¨ä¸Š
    overwrite_comment: true
    dictionary: double_assistant #åæŸ¥æ‰€å¾—çˆ²è’¼é ¡ç¢¼
    comment_format:
      - xform/([a-z;]{2}):([a-z]{2})/ã€”$2ã€•/
  custom_phrase:
    dictionary: ""
    user_dict: custom_phrase
    db_class: stabledb
    enable_completion: false
    enable_sentence: false
    initial_quality: 1

  emoji_suggestion:
    opencc_config: emoji.json
    option_name: emoji_suggestion
  translator:
    dictionary: luna_pinyin.extended
    user_dict: my_dict
#    spelling_hints: 3
#    comment_format:
#      - xform/.*([a-z]{2})$/[$1]/
#    db_class: tabledb


  double_assistant_reverse_lookup_helper:
    tag: double_assistant_reverse_lookup_helper
    dictionary: double_assistant
    spelling_hints: 10
    enable_completion: true
    prefix: "`"
    suffix: ""
    tips: ã€”åŒæ‹¼è¾…åŠ©ç ã€•
    comment_format:
      - xform/.*([a-z]{2})$/[$1]/

  __include: easy_en:/patch_double_pinyin_mspy
  easy_en/enable_sentence: false

  switches/@next:
    name: symbol_support
    reset: 1
    states: [ "æ— ç¬¦", "ç¬¦" ]
  'engine/filters/@before 0':
    simplifier@symbol_support
  symbol_support:
    opencc_config: symbol.json
    option_name: symbol_support
    tips: all
  'punctuator/import_preset': symbols.custom
  'recognizer/patterns/punct': "^/([a-z]+|[0-9])$"
  'recognizer/patterns/double_assistant_reverse_lookup_helper': "`[a-z;]*$"
